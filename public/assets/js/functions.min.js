/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./resources/js/autocomplete.js":
/*!**************************************!*\
  !*** ./resources/js/autocomplete.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Autocomplete)\n/* harmony export */ });\nclass Autocomplete {\n  constructor({\n    container,\n    id,\n    options,\n    selected\n  }) {\n    this.elements = {\n      container,\n      close: null,\n      hidden: null,\n      input: null,\n      list: null\n    };\n    this.id = id;\n    this.options = options;\n    this.filteredOptions = options;\n    this.selectedIndex = 0;\n    this.initialId = selected;\n    this.currentLabel = '';\n    this.open = false;\n    this.isCloseVisible = false;\n    this.init();\n  }\n  static get(options) {\n    const a = new Autocomplete(options);\n    window.autocomplete = window.autocomplete || {};\n    window.autocomplete[options.id] = a;\n    return a;\n  }\n  init() {\n    // Update container.\n    this.elements.container.setAttribute('class', 'select');\n    this.elements.container.addEventListener('focusout', Autocomplete.onFocusOut);\n\n    // Add text input.\n    this.elements.input = document.createElement('input');\n    this.elements.input.setAttribute('autocomplete', 'off');\n    this.elements.input.setAttribute('class', 'select-input');\n    this.elements.input.setAttribute('id', this.id);\n    this.elements.input.setAttribute('spellcheck', 'false');\n    this.elements.input.setAttribute('type', 'text');\n    if (this.initialId) {\n      const selectedOption = this.options.find(({\n        value\n      }) => value === this.initialId);\n      if (selectedOption) {\n        this.elements.input.value = selectedOption.label;\n        this.currentLabel = selectedOption.label;\n      }\n    }\n    this.elements.input.addEventListener('focus', Autocomplete.onFocusInput);\n    this.elements.input.addEventListener('mousedown', Autocomplete.onClickInput);\n    this.elements.input.addEventListener('keydown', Autocomplete.onKeydownInput);\n    this.elements.input.addEventListener('keyup', Autocomplete.onKeyupInput);\n    this.elements.container.appendChild(this.elements.input);\n\n    // Add close button.\n    this.elements.close = document.createElement('button');\n    this.elements.close.setAttribute('aria-label', 'Close');\n    this.elements.close.setAttribute('class', 'select-close');\n    this.elements.close.setAttribute('data-id', this.id);\n    this.elements.close.setAttribute('type', 'button');\n    this.elements.close.addEventListener('click', Autocomplete.onClickClose);\n    if (this.currentLabel) {\n      this.showClose();\n    }\n    this.elements.container.appendChild(this.elements.close);\n\n    // Add results list.\n    this.elements.list = document.createElement('ul');\n    this.elements.list.setAttribute('class', 'select-list');\n    this.elements.list.setAttribute('tabindex', '-1');\n    this.elements.container.appendChild(this.elements.list);\n\n    // Add hidden input.\n    this.elements.hidden = document.createElement('input');\n    this.elements.hidden.setAttribute('class', 'select-hidden');\n    this.elements.hidden.setAttribute('name', this.id);\n    this.elements.hidden.setAttribute('type', 'hidden');\n    if (this.initialId) {\n      this.elements.hidden.setAttribute('data-value', this.currentLabel);\n      this.elements.hidden.value = this.initialId;\n    }\n    this.elements.container.appendChild(this.elements.hidden);\n\n    // Add options to results list.\n    this.setOptions();\n\n    // Set the initially selected item.\n    const initialItem = this.elements.list.querySelector(`[value=\"${this.initialId}\"]`);\n    if (initialItem) {\n      initialItem.classList.add('selected');\n      this.selectedIndex = initialItem.getAttribute('data-index');\n      initialItem.scrollIntoView({\n        block: 'nearest'\n      });\n    }\n  }\n  setOptions(search = '') {\n    // Filter options by current search.\n    this.filteredOptions = this.options;\n    if (search) {\n      search = search.toLowerCase().trim();\n      this.filteredOptions = this.filteredOptions.filter(({\n        label\n      }) => label.toLowerCase().match(new RegExp(`(^|[^a-z])${search}`)));\n    }\n\n    // Empty list.\n    this.elements.list.innerText = '';\n\n    // Add items to list.\n    this.filteredOptions.forEach(({\n      value,\n      label\n    }, index) => {\n      const item = document.createElement('li');\n      item.setAttribute('class', 'select-item');\n      const button = document.createElement('button');\n      button.setAttribute('class', 'select-button');\n      button.setAttribute('data-index', index);\n      button.setAttribute('data-name', this.id);\n      button.setAttribute('tabindex', '-1');\n      button.setAttribute('type', 'button');\n      button.value = value;\n      button.addEventListener('click', Autocomplete.onClickItem);\n      button.addEventListener('mouseenter', Autocomplete.onMouseenterItem);\n      button.innerText = label;\n      item.appendChild(button);\n      this.elements.list.appendChild(item);\n    });\n  }\n  hideList() {\n    if (this.open) {\n      this.elements.list.classList.remove('show');\n      this.open = false;\n    }\n  }\n  showList() {\n    if (!this.open) {\n      this.elements.list.classList.add('show');\n      this.open = true;\n    }\n  }\n  hideClose() {\n    if (this.isCloseVisible) {\n      this.elements.close.classList.remove('show');\n      this.isCloseVisible = false;\n    }\n  }\n  showClose() {\n    if (!this.isCloseVisible) {\n      this.elements.close.classList.add('show');\n      this.isCloseVisible = true;\n    }\n  }\n  setSelectedIndex(i) {\n    i = parseInt(i, 10);\n    this.selectedIndex = i;\n\n    // Unhighlight currently selected item.\n    const selected = this.elements.list.querySelector('.selected');\n    if (selected) {\n      selected.classList.remove('selected');\n    }\n\n    // Highlight new item.\n    const item = this.elements.list.querySelector(`[data-index=\"${i}\"]`);\n    if (item) {\n      item.classList.add('selected');\n      item.scrollIntoView({\n        block: 'nearest'\n      });\n    }\n  }\n  clearInput() {\n    this.currentLabel = '';\n    this.elements.input.value = '';\n    this.elements.hidden.value = '';\n    this.elements.hidden.setAttribute('data-value', '');\n    this.setOptions();\n    this.setSelectedIndex(0);\n  }\n  setValue(button) {\n    this.currentLabel = button.innerText;\n    this.elements.input.value = button.innerText;\n    this.elements.hidden.value = button.value;\n    this.elements.hidden.setAttribute('data-value', button.innerText);\n    this.elements.input.focus();\n    this.hideList();\n  }\n  static onKeydownInput(e) {\n    const id = e.target.getAttribute('id');\n    const a = window.autocomplete[id];\n    if (e.key === 'ArrowDown') {\n      a.showList();\n      if (a.selectedIndex >= a.filteredOptions.length - 1) {\n        a.setSelectedIndex(0);\n      } else {\n        a.setSelectedIndex(a.selectedIndex + 1);\n      }\n    } else if (e.key === 'ArrowUp') {\n      a.showList();\n      if (a.selectedIndex > 0) {\n        a.setSelectedIndex(a.selectedIndex - 1);\n      } else {\n        a.setSelectedIndex(a.filteredOptions.length - 1);\n      }\n    } else if (e.key === 'Enter') {\n      if (a.open) {\n        e.preventDefault();\n        const button = a.elements.list.querySelector('.selected');\n        if (button) {\n          a.setValue(button);\n        }\n      }\n    }\n  }\n  static onKeyupInput(e) {\n    const id = e.target.getAttribute('id');\n    const a = window.autocomplete[id];\n    if (e.target.value.trim() !== a.currentLabel.trim()) {\n      a.showList();\n      a.currentLabel = e.target.value;\n      a.setOptions(a.currentLabel);\n      a.setSelectedIndex(0);\n    }\n  }\n  static onFocusOut(e) {\n    const leaveFocus = e.target.closest('.select');\n    const gainFocus = e.relatedTarget ? e.relatedTarget.closest('.select') : null;\n    if (gainFocus && leaveFocus.getAttribute('id') === gainFocus.getAttribute('id')) {\n      return;\n    }\n    const input = leaveFocus.querySelector('.select-input');\n    const id = input.getAttribute('id');\n    const a = window.autocomplete[id];\n    if (input.value !== a.elements.hidden.getAttribute('data-value')) {\n      a.clearInput();\n      a.hideList();\n      a.hideClose();\n    } else {\n      a.hideList();\n      if (a.currentLabel === '') {\n        a.hideClose();\n      }\n    }\n  }\n  static onFocusInput(e) {\n    const id = e.target.getAttribute('id');\n    const a = window.autocomplete[id];\n    a.showList();\n    a.showClose();\n  }\n  static onClickInput(e) {\n    const id = e.target.getAttribute('id');\n    const a = window.autocomplete[id];\n    if (a.open) {\n      a.hideList();\n      if (a.currentLabel === '') {\n        a.hideClose();\n      }\n    } else {\n      a.showList();\n      a.showClose();\n    }\n  }\n  static onClickItem(e) {\n    const button = e.target;\n    const id = button.getAttribute('data-name');\n    const a = window.autocomplete[id];\n    a.setValue(button);\n    a.setSelectedIndex(button.getAttribute('data-index'));\n  }\n  static onMouseenterItem(e) {\n    const button = e.target;\n    const id = button.getAttribute('data-name');\n    const a = window.autocomplete[id];\n    a.setSelectedIndex(button.getAttribute('data-index'));\n  }\n  static onClickClose(e) {\n    const id = e.target.getAttribute('data-id');\n    const a = window.autocomplete[id];\n    if (!a.open) {\n      a.clearInput();\n    }\n    a.hideList();\n    if (a.currentLabel === '') {\n      a.hideClose();\n    }\n  }\n  static closeAll() {\n    Object.values(window.autocomplete).forEach(a => {\n      a.hideList();\n    });\n  }\n}\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/autocomplete.js?");

/***/ }),

/***/ "./resources/js/initialize.js":
/*!************************************!*\
  !*** ./resources/js/initialize.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _autocomplete__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./autocomplete */ \"./resources/js/autocomplete.js\");\n/* harmony import */ var _submit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./submit */ \"./resources/js/submit.js\");\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results */ \"./resources/js/results.js\");\n\n\n\n_autocomplete__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get({\n  container: document.getElementById('p1-container'),\n  id: 'p1',\n  options: window.people,\n  selected: window.selectedP1\n});\n_autocomplete__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get({\n  container: document.getElementById('p2-container'),\n  id: 'p2',\n  options: window.people,\n  selected: window.selectedP2\n});\ndocument.body.classList.add('js');\ndocument.body.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    _autocomplete__WEBPACK_IMPORTED_MODULE_0__[\"default\"].closeAll();\n  }\n});\nif (window.response) {\n  document.getElementById('search').classList.add('shrink');\n  document.getElementById('results').classList.add('show');\n  (0,_results__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(window.response);\n}\ndocument.getElementById('form').addEventListener('submit', _submit__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/initialize.js?");

/***/ }),

/***/ "./resources/js/request.js":
/*!*********************************!*\
  !*** ./resources/js/request.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((url, callback) => {\n  const req = new XMLHttpRequest();\n  req.onreadystatechange = () => {\n    if (req.readyState === XMLHttpRequest.DONE) {\n      callback(req.responseText);\n    }\n  };\n  req.open('GET', url, true);\n  req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  req.send(null);\n});\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/request.js?");

/***/ }),

/***/ "./resources/js/results.js":
/*!*********************************!*\
  !*** ./resources/js/results.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (response => {\n  document.getElementById('results').classList.add('show');\n\n  // Set message.\n  const resultsMessage = document.getElementById('results-message');\n  resultsMessage.innerText = response.message;\n\n  // Set people.\n  const num = response.path.length;\n  const resultsList = document.getElementById('results-list');\n  resultsList.innerText = '';\n  let i;\n  for (i = 0; i < num; i += 1) {\n    const li = document.createElement('li');\n    li.setAttribute('class', 'result-item');\n    const div = document.createElement('div');\n    div.setAttribute('class', 'result-image');\n    li.appendChild(div);\n    const image = document.createElement('img');\n    image.setAttribute('class', `result-img ${response.path[i].status}`);\n    image.setAttribute('src', response.path[i].image ? response.path[i].image : '/assets/img/user.png');\n    div.appendChild(image);\n    const name = document.createElement('div');\n    name.setAttribute('class', 'result-name');\n    name.innerText = response.path[i].name;\n    li.appendChild(name);\n    resultsList.appendChild(li);\n  }\n  setTimeout(() => {\n    resultsMessage.classList.add('show');\n    resultsList.classList.add('show');\n  }, 300);\n});\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/results.js?");

/***/ }),

/***/ "./resources/js/spinner.js":
/*!*********************************!*\
  !*** ./resources/js/spinner.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hideSpinner: () => (/* binding */ hideSpinner),\n/* harmony export */   showSpinner: () => (/* binding */ showSpinner)\n/* harmony export */ });\nconst showSpinner = () => {\n  const $spinner = document.getElementById('spinner');\n  $spinner.classList.add('show');\n  return $spinner;\n};\nconst hideSpinner = $spinner => {\n  $spinner.classList.remove('show');\n};\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/spinner.js?");

/***/ }),

/***/ "./resources/js/submit.js":
/*!********************************!*\
  !*** ./resources/js/submit.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _spinner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spinner */ \"./resources/js/spinner.js\");\n/* harmony import */ var _request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./request */ \"./resources/js/request.js\");\n/* harmony import */ var _results__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results */ \"./resources/js/results.js\");\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (e => {\n  e.preventDefault();\n  document.getElementById('search').classList.add('shrink');\n  document.getElementById('results').classList.add('show');\n  const resultsMessage = document.getElementById('results-message');\n  resultsMessage.classList.remove('show');\n  const resultsList = document.getElementById('results-list');\n  resultsList.classList.remove('show');\n  const transitionDuration = 300;\n  const p1 = window.autocomplete.p1.elements.hidden.value;\n  const p2 = window.autocomplete.p2.elements.hidden.value;\n  if (!p1 || !p2) {\n    (0,_results__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n      message: 'Please select two people.',\n      path: []\n    });\n    return;\n  }\n  const query = `?p1=${p1}&p2=${p2}`;\n  const title = `${window.autocomplete.p1.elements.input.value} & ${window.autocomplete.p2.elements.input.value} | Corrieography`;\n  document.title = title;\n  window.history.pushState({}, title, query);\n  setTimeout(() => {\n    resultsMessage.innerText = '';\n    resultsList.innerText = '';\n    const $spinner = (0,_spinner__WEBPACK_IMPORTED_MODULE_0__.showSpinner)();\n    (0,_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/search${query}`, response => {\n      (0,_spinner__WEBPACK_IMPORTED_MODULE_0__.hideSpinner)($spinner);\n      setTimeout(() => {\n        response = JSON.parse(response);\n        (0,_results__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(response);\n      }, transitionDuration);\n    });\n  }, transitionDuration);\n});\n\n//# sourceURL=webpack://@jlbelanger/corrie/./resources/js/submit.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./resources/js/initialize.js");
/******/ 	
/******/ })()
;