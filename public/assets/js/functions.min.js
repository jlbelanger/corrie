!function(){"use strict";var e,t={140:function(){class e{constructor({container:e,id:t,options:s,selected:n}){this.elements={container:e,close:null,hidden:null,input:null,list:null},this.id=t,this.options=s,this.filteredOptions=s,this.selectedIndex=0,this.initialId=n,this.currentLabel="",this.open=!1,this.isCloseVisible=!1,this.init()}static get(t){const s=new e(t);return window.autocomplete=window.autocomplete||{},window.autocomplete[t.id]=s,s}init(){if(this.elements.container.setAttribute("class","select"),this.elements.container.addEventListener("focusout",e.onFocusOut),this.elements.input=document.createElement("input"),this.elements.input.setAttribute("autocomplete","off"),this.elements.input.setAttribute("class","select-input"),this.elements.input.setAttribute("id",this.id),this.elements.input.setAttribute("spellcheck","false"),this.elements.input.setAttribute("type","text"),this.initialId){const e=this.options.find((({value:e})=>e===this.initialId));e&&(this.elements.input.value=e.label,this.currentLabel=e.label)}this.elements.input.addEventListener("focus",e.onFocusInput),this.elements.input.addEventListener("mousedown",e.onClickInput),this.elements.input.addEventListener("keydown",e.onKeydownInput),this.elements.input.addEventListener("keyup",e.onKeyupInput),this.elements.container.appendChild(this.elements.input),this.elements.close=document.createElement("button"),this.elements.close.setAttribute("aria-label","Close"),this.elements.close.setAttribute("class","select-close"),this.elements.close.setAttribute("data-id",this.id),this.elements.close.setAttribute("type","button"),this.elements.close.addEventListener("click",e.onClickClose),this.currentLabel&&this.showClose(),this.elements.container.appendChild(this.elements.close),this.elements.list=document.createElement("ul"),this.elements.list.setAttribute("class","select-list"),this.elements.list.setAttribute("tabindex","-1"),this.elements.container.appendChild(this.elements.list),this.elements.hidden=document.createElement("input"),this.elements.hidden.setAttribute("class","select-hidden"),this.elements.hidden.setAttribute("name",this.id),this.elements.hidden.setAttribute("type","hidden"),this.initialId&&(this.elements.hidden.setAttribute("data-value",this.currentLabel),this.elements.hidden.value=this.initialId),this.elements.container.appendChild(this.elements.hidden),this.setOptions();const t=this.elements.list.querySelector(`[value="${this.initialId}"]`);t&&(t.classList.add("selected"),this.selectedIndex=t.getAttribute("data-index"),t.scrollIntoView({block:"nearest"}))}setOptions(t=""){this.filteredOptions=this.options,t&&(t=t.toLowerCase().trim(),this.filteredOptions=this.filteredOptions.filter((({label:e})=>e.toLowerCase().match(new RegExp(`(^|[^a-z])${t}`))))),this.elements.list.innerText="",this.filteredOptions.forEach((({value:t,label:s},n)=>{const i=document.createElement("li");i.setAttribute("class","select-item");const l=document.createElement("button");l.setAttribute("class","select-button"),l.setAttribute("data-index",n),l.setAttribute("data-name",this.id),l.setAttribute("tabindex","-1"),l.setAttribute("type","button"),l.value=t,l.addEventListener("click",e.onClickItem),l.addEventListener("mouseenter",e.onMouseenterItem),l.innerText=s,i.appendChild(l),this.elements.list.appendChild(i)}))}hideList(){this.open&&(this.elements.list.classList.remove("show"),this.open=!1)}showList(){this.open||(this.elements.list.classList.add("show"),this.open=!0)}hideClose(){this.isCloseVisible&&(this.elements.close.classList.remove("show"),this.isCloseVisible=!1)}showClose(){this.isCloseVisible||(this.elements.close.classList.add("show"),this.isCloseVisible=!0)}setSelectedIndex(e){e=parseInt(e,10),this.selectedIndex=e;const t=this.elements.list.querySelector(".selected");t&&t.classList.remove("selected");const s=this.elements.list.querySelector(`[data-index="${e}"]`);s&&(s.classList.add("selected"),s.scrollIntoView({block:"nearest"}))}clearInput(){this.currentLabel="",this.elements.input.value="",this.elements.hidden.value="",this.elements.hidden.setAttribute("data-value",""),this.setOptions(),this.setSelectedIndex(0)}setValue(e){this.currentLabel=e.innerText,this.elements.input.value=e.innerText,this.elements.hidden.value=e.value,this.elements.hidden.setAttribute("data-value",e.innerText),this.elements.input.focus(),this.hideList()}static onKeydownInput(e){const t=e.target.getAttribute("id"),s=window.autocomplete[t];if("ArrowDown"===e.key)s.showList(),s.selectedIndex>=s.filteredOptions.length-1?s.setSelectedIndex(0):s.setSelectedIndex(s.selectedIndex+1);else if("ArrowUp"===e.key)s.showList(),s.selectedIndex>0?s.setSelectedIndex(s.selectedIndex-1):s.setSelectedIndex(s.filteredOptions.length-1);else if("Enter"===e.key&&s.open){e.preventDefault();const t=s.elements.list.querySelector(".selected");t&&s.setValue(t)}}static onKeyupInput(e){const t=e.target.getAttribute("id"),s=window.autocomplete[t];e.target.value.trim()!==s.currentLabel.trim()&&(s.showList(),s.currentLabel=e.target.value,s.setOptions(s.currentLabel),s.setSelectedIndex(0))}static onFocusOut(e){const t=e.target.closest(".select"),s=e.relatedTarget?e.relatedTarget.closest(".select"):null;if(s&&t.getAttribute("id")===s.getAttribute("id"))return;const n=t.querySelector(".select-input"),i=n.getAttribute("id"),l=window.autocomplete[i];n.value!==l.elements.hidden.getAttribute("data-value")?(l.clearInput(),l.hideList(),l.hideClose()):(l.hideList(),""===l.currentLabel&&l.hideClose())}static onFocusInput(e){const t=e.target.getAttribute("id"),s=window.autocomplete[t];s.showList(),s.showClose()}static onClickInput(e){const t=e.target.getAttribute("id"),s=window.autocomplete[t];s.open?(s.hideList(),""===s.currentLabel&&s.hideClose()):(s.showList(),s.showClose())}static onClickItem(e){const t=e.target,s=t.getAttribute("data-name"),n=window.autocomplete[s];n.setValue(t),n.setSelectedIndex(t.getAttribute("data-index"))}static onMouseenterItem(e){const t=e.target,s=t.getAttribute("data-name");window.autocomplete[s].setSelectedIndex(t.getAttribute("data-index"))}static onClickClose(e){const t=e.target.getAttribute("data-id"),s=window.autocomplete[t];s.open||s.clearInput(),s.hideList(),""===s.currentLabel&&s.hideClose()}static closeAll(){Object.values(window.autocomplete).forEach((e=>{e.hideList()}))}}var t=e=>{document.getElementById("results").classList.add("show");const t=document.getElementById("results-message");t.innerText=e.message;const s=e.path.length,n=document.getElementById("results-list");let i;for(n.innerText="",i=0;i<s;i+=1){const t=document.createElement("li");t.setAttribute("class","result-item");const s=document.createElement("div");s.setAttribute("class","result-image"),t.appendChild(s);const l=document.createElement("img");l.setAttribute("class",`result-img ${e.path[i].status}`),l.setAttribute("src",e.path[i].image?e.path[i].image:"/assets/img/user.png"),s.appendChild(l);const o=document.createElement("div");o.setAttribute("class","result-name"),o.innerText=e.path[i].name,t.appendChild(o),n.appendChild(t)}setTimeout((()=>{t.classList.add("show"),n.classList.add("show")}),300)};const s=JSON.parse(document.querySelector("[data-people]").value);e.get({container:document.getElementById("p1-container"),id:"p1",options:s,selected:parseInt(document.getElementById("p1-value").value,10)}),e.get({container:document.getElementById("p2-container"),id:"p2",options:s,selected:parseInt(document.getElementById("p2-value").value,10)}),document.body.classList.add("js"),document.body.addEventListener("keydown",(t=>{"Escape"===t.key&&e.closeAll()}));const n=JSON.parse(document.querySelector("[data-response]").value);n&&(document.getElementById("search").classList.add("shrink"),document.getElementById("results").classList.add("show"),t(n)),document.getElementById("form").addEventListener("submit",(e=>{e.preventDefault(),document.getElementById("search").classList.add("shrink"),document.getElementById("results").classList.add("show");const s=document.getElementById("results-message");s.classList.remove("show");const n=document.getElementById("results-list");n.classList.remove("show");const i=window.autocomplete.p1.elements.hidden.value,l=window.autocomplete.p2.elements.hidden.value;if(!i||!l)return void t({message:"Please select two people.",path:[]});const o=`?p1=${i}&p2=${l}`,a=`${window.autocomplete.p1.elements.input.value} & ${window.autocomplete.p2.elements.input.value} | Corrieography`;document.title=a,window.history.pushState({},a,o),setTimeout((()=>{s.innerText="",n.innerText="";const e=(()=>{const e=document.getElementById("spinner");return e.classList.add("show"),e})();fetch(`/search${o}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then((t=>((e=>{e.classList.remove("show")})(e),t))).then((e=>{if(!e.ok){const s=`${e.status} ${e.statusText}`;throw t({message:`Error: ${s}`,path:[]}),new Error(s)}return e})).then((e=>e.json())).then((e=>{e&&setTimeout((()=>{t(e)}),300)}))}),300)}))}},s={};function n(e){var i=s[e];if(void 0!==i)return i.exports;var l=s[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=function(t,s,i,l){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],l=e[c][2];for(var a=!0,d=0;d<s.length;d++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](s[d])}))?s.splice(d--,1):(a=!1,l<o&&(o=l));if(a){e.splice(c--,1);var r=i();void 0!==r&&(t=r)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[s,i,l]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={906:0,314:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,l,o=s[0],a=s[1],d=s[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(d)var c=d(n)}for(t&&t(s);r<o.length;r++)l=o[r],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},s=self.webpackChunk_jlbelanger_corrie=self.webpackChunk_jlbelanger_corrie||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var i=n.O(void 0,[314],(function(){return n(140)}));i=n.O(i)}();